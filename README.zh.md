ä¸­æ–‡ | [English](./README.md)

# Tamagui + Solito + Next + Expo ReactNaive + Jotai

## ğŸ”¦ å…³äº

è¿™æ˜¯ä¸€ä¸ªåŸºäº Expo + Next.js + Tamagui + Solito åº”ç”¨ç¨‹åºçš„èµ·æ­¥æ¼”ç¤ºé¡¹ç›®ã€‚

## ğŸ“¦ åŒ…æ‹¬çš„åŒ…

- [Tamagui](https://tamagui.dev)
- [Solito](https://solito.dev) ç”¨äºè·¨å¹³å°å¯¼èˆª
- [Jotai](https://jotai.org)
- Expo SDK
- Next.js
- Expo Router

## ğŸ—‚ æ–‡ä»¶å¸ƒå±€

ä¸»è¦çš„åº”ç”¨ç¨‹åºæœ‰:

- `expo` (åŸç”Ÿ)
- `next` (ç½‘é¡µ)

- `packages` è·¨åº”ç”¨ç¨‹åºå…±äº«çš„åŒ…
  - `ui` åŒ…å«å°†ç”± Tamagui ä¼˜åŒ–çš„è‡ªå®šä¹‰ UI å¥—ä»¶
  - `app` ä½ å°†ä» `app/` å¯¼å…¥å¤§å¤šæ•°æ–‡ä»¶
    - `features` (ä¸ä½¿ç”¨ `screens` æ–‡ä»¶å¤¹ï¼ŒæŒ‰åŠŸèƒ½ç»„ç»‡)
    - `provider` (åŒ…è£¹åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æä¾›è€…ï¼Œä»¥åŠä¸€äº› Web çš„æ— æ“ä½œ)

å¦‚æœä½ çŸ¥é“ä½ åœ¨åšä»€ä¹ˆå¹¶ä¸”æœ‰å……åˆ†çš„ç†ç”±ï¼Œä½ å¯ä»¥åœ¨ `packages/` ä¸­æ·»åŠ å…¶ä»–æ–‡ä»¶å¤¹ã€‚

## ğŸ  å¯åŠ¨åº”ç”¨ç¨‹åº

- å®‰è£…ä¾èµ–é¡¹: `yarn`

- Next.js æœ¬åœ°å¼€å‘: `yarn web`

è¦åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œä¼˜åŒ–å™¨ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼Œå…³é—­å®ƒä¼šæ›´å¿«ï¼‰ï¼š`yarn web:extract`ã€‚ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»º `yarn web:prod`ã€‚

è¦æŸ¥çœ‹ç¼–è¯‘å™¨çš„è°ƒè¯•è¾“å‡ºï¼Œè¯·åœ¨ä»»ä½•æ–‡ä»¶çš„é¡¶éƒ¨æ·»åŠ  `// debug` ä½œä¸ºæ³¨é‡Šã€‚

- Expo æœ¬åœ°å¼€å‘: `yarn native`

## UI å¥—ä»¶

æ³¨æ„æˆ‘ä»¬æ­£åœ¨éµå¾ª [è®¾è®¡ç³»ç»ŸæŒ‡å—](https://tamagui.dev/docs/guides/design-systems) å¹¶ä¸ºç»„ä»¶åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„åŒ…

æŸ¥çœ‹ `packages/ui` å‘½åä¸º `@my/ui` çš„å†…å®¹ï¼Œäº†è§£è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

## ğŸ†• æ·»åŠ æ–°ä¾èµ–é¡¹

### çº¯ JS ä¾èµ–é¡¹

å¦‚æœä½ è¦å®‰è£…ä¸€ä¸ªå°†è·¨å¹³å°ä½¿ç”¨çš„åªæœ‰ JavaScript çš„ä¾èµ–é¡¹ï¼Œè¯·åœ¨ `packages/app` ä¸­å®‰è£…å®ƒ

```sh
cd packages/app
yarn add date-fns
cd ../..
yarn
```

### åŸç”Ÿä¾èµ–é¡¹

å¦‚æœä½ è¦å®‰è£…åŒ…å«ä»»ä½•åŸç”Ÿä»£ç çš„åº“ï¼Œå¿…é¡»åœ¨ `expo` ä¸­å®‰è£…å®ƒï¼š

```sh
cd apps/expo
yarn add react-native-reanimated
cd ..
yarn
```

## æ›´æ–°æ–°ä¾èµ–é¡¹

### çº¯ JS ä¾èµ–é¡¹

```sh
yarn upgrade-interactive
```

ä½ ä¹Ÿå¯ä»¥åœ¨ `packages/app` ä¸­å®‰è£…åŸç”Ÿåº“ï¼Œå¦‚æœä½ æƒ³åœ¨ `app` æ–‡ä»¶å¤¹å†…è‡ªåŠ¨å¯¼å…¥è¯¥åŒ…ã€‚ä½†æ˜¯ï¼Œä½ éœ€è¦å°å¿ƒå¹¶å®‰è£…å®Œå…¨ç›¸åŒç‰ˆæœ¬çš„ä¸¤ä¸ªåŒ…ã€‚å¦‚æœç‰ˆæœ¬æœ‰ä»»ä½•ä¸åŒ¹é…ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸¥é‡çš„é”™è¯¯ã€‚è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ monorepo é—®é¢˜ã€‚æˆ‘ä½¿ç”¨ `lerna-update-wizard` æ¥å¸®åŠ©è¿™ä¸ªï¼ˆä½ ä¸éœ€è¦ä½¿ç”¨ Lerna æ¥ä½¿ç”¨é‚£ä¸ªåº“ï¼‰ã€‚

ä½ å¯èƒ½è¿˜æƒ³è®© next åº”ç”¨ç¨‹åºçš„åŸç”Ÿæ¨¡å—è¿›è¡Œè½¬è¯‘ã€‚å¦‚æœä½ çœ‹åˆ° `Cannot use import statement outside a module` çš„é”™è¯¯ä¿¡æ¯ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ `next.config.js` ä¸­ä½¿ç”¨ `transpilePackages` å¹¶å°†æ¨¡å—æ·»åŠ åˆ°é‚£é‡Œçš„æ•°ç»„ä¸­ã€‚


## éƒ¨ç½²åˆ° Vercel

- æ ¹ç›®å½•: `apps/next`
- å®‰è£…å‘½ä»¤ä¸º `yarn set version stable && yarn install`
- æ„å»ºå‘½ä»¤ï¼šä¿ç•™é»˜è®¤è®¾ç½®
- è¾“å‡ºç›®å½•ï¼šä¿ç•™é»˜è®¤è®¾ç½®

### Vercel éƒ¨ç½²æ•…éšœæ’é™¤
å¦‚æœåœ¨æ¨é€åˆ° GitHub åï¼Œä½ çœ‹åˆ°è‡ªåŠ¨çš„ vercel éƒ¨ç½²å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š
```
â¤ YN0028: â”‚ The lockfile would have been modified by this install, which is explicitly forbidden.
â¤ YN0000: â”” Completed
â¤ YN0000: Failed with errors in 0s 700ms
Error: Command "yarn set version stable && yarn install" exited with 1
```
åœ¨æœ¬åœ°è¿è¡Œ yarn vercel:install ç„¶åæäº¤å¹¶æ¨é€æ›´æ”¹åˆ° GitHubã€‚
